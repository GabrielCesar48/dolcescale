<!-- templates/components/duty_card.html -->

<div class="col-md-6">
    <div class="card h-100">
        <div class="card-header text-center">
            {% if 'Reabastecimento' in duty.duty_type.name %}
                <i class="bi bi-sunrise me-2"></i>
            {% else %}
                <i class="bi bi-sunset me-2"></i>
            {% endif %}
            {{ duty.duty_type.name }} - {{ duty.duty_type.time|time:"H:i" }}
        </div>
        <div class="card-body text-center">
            {% if duty.member.avatar %}
                <img src="{{ duty.member.avatar.url }}" alt="{{ duty.member }}" class="member-avatar mb-3">
            {% else %}
                <img src="/api/placeholder/120/120" alt="{{ duty.member }}" class="member-avatar mb-3">
            {% endif %}
            <h4 class="card-title mb-1">{{ duty.member }}</h4>
            <p class="text-muted mb-3">
                {{ duty.member.user.get_full_name }}
            </p>
            
            <span class="badge {% if 'Reabastecimento' in duty.duty_type.name %}badge-morning{% else %}badge-evening{% endif %}">
                {% if 'Reabastecimento' in duty.duty_type.name %}
                    <i class="bi bi-cup-hot me-1"></i>
                {% else %}
                    <i class="bi bi-droplet me-1"></i>
                {% endif %}
                Responsável Hoje
            </span>
            
            <hr>
            
            <p class="card-text mt-3 mb-0">
                {% if duty.completed %}
                    <i class="bi bi-check-circle-fill text-success me-2"></i>Tarefa Concluída
                {% elif duty.notification_sent %}
                    <i class="bi bi-envelope-check text-info me-2"></i>Notificação Enviada
                {% else %}
                    <i class="bi bi-hourglass-split text-warning me-2"></i>Notificação Pendente
                {% endif %}
            </p>
            
            <p class="small text-muted">
                {% if duty.notification_sent %}
                    Enviado por Email
                {% else %}
                    Prevista para {{ duty.duty_type.time|time:"H:i" }} - Email
                {% endif %}
            </p>
            
            {% if user.is_authenticated %}
                <div class="mt-3">
                    <a href="{% url 'mark_completed' duty.id %}" class="btn btn-sm {% if duty.completed %}btn-outline-danger{% else %}btn-outline-success{% endif %}">
                        {% if duty.completed %}
                            <i class="bi bi-x-circle me-1"></i>Desmarcar
                        {% else %}
                            <i class="bi bi-check-circle me-1"></i>Marcar como concluída
                        {% endif %}
                    </a>
                </div>
            {% endif %}
        </div>
    </div>
</div>